local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local window = Rayfield:CreateWindow({
    Name = "Forsaken - Alpha Hax",
    LoadingTitle = "Loading Assets..",
    LoadingSubtitle = "Created By Luxx",
    ConfigurationSaving = {
        Enabled = false,
        FileName = "Sirius"
    },
    KeySystem = true,
    KeySettings = {
        Title = "Luxx's Key System",
        Subtitle = "Enter Your Key",
        Note = "Rate The Features",
        FileName = "Sirius",
        SaveKey = false,
        Key = "2025"
    }
})

local generatorsTab = window:CreateTab("Generators", 4483362458)
local generatorsSection = generatorsTab:CreateSection("Generators")

local autoCompleteEnabled = false
local autoCompleteThread

local function getClosestGenerator()
    local player = game.Players.LocalPlayer
    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return nil end

    local mapFolder = game.Workspace:FindFirstChild("Map")
    if not mapFolder then return nil end

    local ingameFolder = mapFolder:FindFirstChild("Ingame")
    if not ingameFolder then return nil end

    local closest
    local shortestDistance = math.huge

    for _, obj in pairs(ingameFolder:GetChildren()) do
        if obj.Name == "Generator" and obj:IsA("Model") and obj:FindFirstChild("PrimaryPart") then
            local distance = (hrp.Position - obj.PrimaryPart.Position).Magnitude
            if distance < shortestDistance then
                shortestDistance = distance
                closest = obj
            end
        end
    end

    return closest
end

local function autoCompleteGenerators()
    autoCompleteThread = coroutine.create(function()
        while autoCompleteEnabled do
            local player = game.Players.LocalPlayer
            local puzzleUI = player:WaitForChild("PlayerGui"):FindFirstChild("PuzzleUI")

            if puzzleUI then
                local generator = getClosestGenerator()
                if generator then
                    local remotes = generator:FindFirstChild("Remotes")
                    if remotes and remotes:FindFirstChild("RE") then
                        wait(7)
                        while autoCompleteEnabled and player.PlayerGui:FindFirstChild("PuzzleUI") do
                            remotes.RE:FireServer()
                            wait(7)
                        end
                    end
                end
            end
            wait(1)
        end
    end)
    coroutine.resume(autoCompleteThread)
end

generatorsTab:CreateToggle({
    Name = "Auto Complete Generators",
    CurrentValue = false,
    SectionParent = generatorsSection,
    Callback = function(state)
        autoCompleteEnabled = state
        if state then
            Rayfield:Notify({
                Title = "Success!",
                Content = "Auto Complete Generators Enabled!",
                Duration = 5
            })
            autoCompleteGenerators()
        else
            Rayfield:Notify({
                Title = "Success!",
                Content = "Auto Complete Generators Disabled!",
                Duration = 5
            })
        end
    end
})
